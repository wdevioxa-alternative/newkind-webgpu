var common=require("./common"),test=require("tape"),assert=require("assert"),EventEmitter=require("../").EventEmitter,util=require("util");function MyEE(e){this.once(1,e),this.emit(1),this.removeAllListeners(),EventEmitter.call(this)}util.inherits(MyEE,EventEmitter);var myee=new MyEE(common.mustCall());function ErrorEE(){this.emit("error",new Error("blerg"))}function MyEE2(){EventEmitter.call(this)}util.inherits(ErrorEE,EventEmitter),assert.throws((function(){new ErrorEE}),/blerg/),test.onFinish((function(){assert.ok(!(myee._events instanceof Object)),assert.strictEqual(Object.keys(myee._events).length,0)})),MyEE2.prototype=new EventEmitter;var ee1=new MyEE2,ee2=new MyEE2;ee1.on("x",(function(){})),assert.strictEqual(ee2.listenerCount("x"),0);