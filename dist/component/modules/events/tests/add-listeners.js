var common=require("./common"),assert=require("assert"),EventEmitter=require("../"),ee=new EventEmitter,events_new_listener_emitted=[],listeners_new_listener_emitted=[];assert.strictEqual(ee.addListener,ee.on),ee.on("newListener",(function(e,t){"newListener"!==e&&(events_new_listener_emitted.push(e),listeners_new_listener_emitted.push(t))}));var hello=common.mustCall((function(e,t){assert.strictEqual("a",e),assert.strictEqual("b",t)}));ee.once("newListener",(function(e,t){assert.strictEqual(e,"hello"),assert.strictEqual(t,hello);var s=this.listeners("hello");assert.ok(Array.isArray(s)),assert.strictEqual(s.length,0)})),ee.on("hello",hello),ee.once("foo",assert.fail),assert.ok(Array.isArray(events_new_listener_emitted)),assert.strictEqual(events_new_listener_emitted.length,2),assert.strictEqual(events_new_listener_emitted[0],"hello"),assert.strictEqual(events_new_listener_emitted[1],"foo"),assert.ok(Array.isArray(listeners_new_listener_emitted)),assert.strictEqual(listeners_new_listener_emitted.length,2),assert.strictEqual(listeners_new_listener_emitted[0],hello),assert.strictEqual(listeners_new_listener_emitted[1],assert.fail),ee.emit("hello","a","b");var f=new EventEmitter;f.setMaxListeners(0);var listen1=function(){},listen2=function(){};(ee=new EventEmitter).once("newListener",(function(){var e=ee.listeners("hello");assert.ok(Array.isArray(e)),assert.strictEqual(e.length,0),ee.once("newListener",(function(){var e=ee.listeners("hello");assert.ok(Array.isArray(e)),assert.strictEqual(e.length,0)})),ee.on("hello",listen2)})),ee.on("hello",listen1);var listeners=ee.listeners("hello");assert.ok(Array.isArray(listeners)),assert.strictEqual(listeners.length,2),assert.strictEqual(listeners[0],listen2),assert.strictEqual(listeners[1],listen1),assert.throws((function(){(new EventEmitter).on("foo",null)}),/^TypeError: The "listener" argument must be of type Function. Received type object$/);